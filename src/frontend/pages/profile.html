<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile â€” Promise</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><circle cx='32' cy='32' r='12' fill='%23f4845f'/></svg>">
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/css/base.css">
<style>
.glass-nav{position:fixed;top:0;left:0;right:0;z-index:100;display:flex;justify-content:space-between;align-items:center;padding:16px 48px;background:rgba(250,248,245,0.72);backdrop-filter:blur(20px);border-bottom:1px solid rgba(232,228,223,0.5)}
.glass-nav .wordmark{font-family:'DM Serif Display',serif;font-size:20px;color:var(--ink);text-decoration:none}
.glass-nav .wordmark .dot{color:var(--accent)}
.glass-nav .nav-links{display:flex;align-items:center;gap:24px}
.glass-nav .nav-links a{font-size:14px;color:var(--muted);text-decoration:none;font-weight:500}
.glass-nav .nav-links a:hover,.glass-nav .nav-links a.active{color:var(--ink)}
.glass-nav .btn{color:#fff!important}

.profile-wrap { max-width: 560px; margin: 0 auto; padding: 88px 48px 64px; }
.profile-wrap h1 { font-size: 24px; margin-bottom: 8px; }
.profile-wrap .sub { font-size: 13px; color: var(--muted); margin-bottom: 32px; }

.avatar-section { margin-bottom: 32px; display: flex; align-items: center; gap: 24px; }
.avatar-preview {
  width: 96px; height: 96px; border-radius: 50%; border: 2.5px solid var(--accent);
  overflow: hidden; background: var(--border); flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  font-family: 'DM Serif Display', serif; font-size: 32px; color: var(--muted);
}
.avatar-preview img { width: 100%; height: 100%; object-fit: cover; display: block; }
.avatar-upload label { display: inline-block; cursor: pointer; }
.avatar-upload input[type=file] { display: none; }
.avatar-upload .hint { font-size: 12px; color: var(--muted); margin-top: 8px; }

.form-group { margin-bottom: 20px; }
.form-group label { display: block; font-size: 13px; font-weight: 600; color: var(--ink); margin-bottom: 6px; }
.form-group input[type=text], .form-group textarea, .form-group select {
  width: 100%; padding: 10px 12px; font-size: 14px; border: 1px solid var(--border);
  border-radius: 6px; font-family: inherit;
}
.form-group textarea { min-height: 80px; resize: vertical; }
.form-group .radio-group { display: flex; gap: 16px; margin-top: 6px; }
.form-group .radio-group label { display: inline-flex; align-items: center; gap: 6px; font-weight: 400; cursor: pointer; }
.visibility-buttons { display: flex; gap: 0; margin-top: 6px; }
.vis-btn {
  font: inherit; font-size: 14px; padding: 10px 20px; border: 1px solid var(--border);
  background: var(--bg); color: var(--muted); cursor: pointer; border-radius: 0;
  transition: background 0.2s, color 0.2s, border-color 0.2s;
}
.vis-btn:first-of-type { border-radius: 6px 0 0 6px; }
.vis-btn:last-of-type { border-radius: 0 6px 6px 0; border-left: none; }
.vis-btn:hover { background: var(--border); color: var(--ink); }
.vis-btn.active { background: var(--accent); color: #fff; border-color: var(--accent); }

.form-actions { margin-top: 28px; display: flex; gap: 12px; align-items: center; }
.form-actions .msg { font-size: 13px; color: var(--accent); }
.form-actions .msg.err { color: #c53030; }

.nav-bell{position:relative;display:inline-flex;align-items:center;padding:4px 8px}
.notif-badge{position:absolute;top:-2px;right:-2px;min-width:18px;height:18px;padding:0 5px;font-size:11px;font-weight:700;color:#fff;background:var(--accent);border-radius:9px;display:flex;align-items:center;justify-content:center}
.nav-bell .bell-icon{display:inline-flex;align-items:center;color:var(--muted)}
.nav-bell:hover .bell-icon{color:var(--ink)}
.nav-logout{background:none;border:none;font:inherit;font-size:14px;color:var(--muted);cursor:pointer;padding:0;margin:0}
.nav-logout:hover{color:var(--ink)}

.site-footer { text-align: center; padding: 24px; font-size: 12px; color: var(--muted); }
</style>
</head>
<body>

<nav class="glass-nav" id="nav">
  <a class="wordmark" href="/">Promise<span class="dot">.</span></a>
  <div class="nav-links">
    <a href="/dashboard">Dashboard</a>
    <a href="/friends">Friends</a>
    <a href="/profile" class="active">Profile</a>
    <a href="/notifications" class="nav-bell" title="Notifications">
      <span class="bell-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg></span>
      <span class="notif-badge" id="navNotifBadge" style="display:none;">0</span>
    </a>
    <a href="/promise" class="btn">Make a Promise</a>
    <button type="button" class="nav-logout" id="logoutBtn">Logout</button>
  </div>
</nav>

<div class="profile-wrap">
  <h1>Profile</h1>
  <p class="sub">Update your display name, photo, bio, and visibility.</p>

  <div class="avatar-section">
    <div class="avatar-preview" id="avatarPreview" aria-hidden="true"></div>
    <div class="avatar-upload">
      <label>
        <span class="btn">Choose photo</span>
        <input type="file" id="avatarInput" accept="image/jpeg,image/png,image/gif,image/webp">
      </label>
      <p class="hint">JPEG, PNG, GIF or WebP. Max 5MB.</p>
    </div>
  </div>

  <form id="profileForm">
    <div class="form-group">
      <label for="display_name">Display name</label>
      <input type="text" id="display_name" name="display_name" placeholder="How you want to be shown">
    </div>
    <div class="form-group">
      <label for="bio">Bio</label>
      <textarea id="bio" name="bio" placeholder="A short line about you"></textarea>
    </div>
    <div class="form-group">
      <label>Profile visibility</label>
      <div class="visibility-buttons">
        <button type="button" class="vis-btn active" data-value="public">Public</button>
        <button type="button" class="vis-btn" data-value="private">Private</button>
      </div>
      <input type="hidden" name="profile_visibility" id="profile_visibility" value="public">
    </div>
    <div class="form-actions">
      <button type="submit" class="btn">Save profile</button>
      <span class="msg" id="formMsg"></span>
    </div>
  </form>
</div>

<footer class="site-footer">&copy; 2026 Promise.</footer>

<script type="module" src="/frontend/pages/profile.page.js"></script>
</body>
</html>
