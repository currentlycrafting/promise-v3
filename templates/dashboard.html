<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Promise Tracker</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>Promise Tracker</h1>
      </div>

      <div class="card">
        <h2>Create a Promise</h2>
        <form action="/promises" method="post">
          <label>Describe your promise</label>
          <input type="text" name="raw_text" required />
          <label>Deadline (e.g., 1h 30m 10s)</label>
          <input type="text" name="deadline" required />
          <button type="submit">Create</button>
        </form>
      </div>

      <div class="card">
        <h2>Current Promises</h2>
        {% if promises|length == 0 %}
          <p>No active promises.</p>
        {% else %}
          <ul class="list">
            {% for p in promises %}
              <li>
                <div class="row">
                  <div>
                    <div class="title">{{ p.name }} ({{ p.promise_type }})</div>
                    <div class="muted">{{ p.content }}</div>
                    <div class="muted">Time left: {{ p.time_left }}</div>
                  </div>
                  <form action="/promises/{{ p.id }}/complete" method="post">
                    <button class="secondary" type="submit">Complete</button>
                  </form>
                </div>
              </li>
            {% endfor %}
          </ul>
        {% endif %}
      </div>

    </div>
  </body>
</html>
